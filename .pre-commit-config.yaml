repos:
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.14.6
    hooks:
      - id: ruff
        args: [--fix]
      - id: ruff-format

  - repo: local
    hooks:
      - id: ty
        name: ty type check
        entry: uv run ty check
        language: system
        types: [python]
        pass_filenames: false

      - id: sqlfluff-dbt-lint
        name: SQLFluff Lint (dbt projects)
        entry: uv run sqlfluff-project-lint --require-dbt
        language: system
        types: [sql]
        require_serial: true
        pass_filenames: false
        always_run: true

      - id: sqlfluff-dbt-fix
        name: SQLFluff Fix (dbt projects)
        entry: uv run sqlfluff-project-fix --require-dbt
        language: system
        types: [sql]
        require_serial: true
        pass_filenames: false
        always_run: true

  - repo: https://github.com/compilerla/conventional-pre-commit
    rev: v3.4.0
    hooks:
      - id: conventional-pre-commit
        stages: [commit-msg]
